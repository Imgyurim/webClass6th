(this.webpackJsonpwaffle=this.webpackJsonpwaffle||[]).push([[14],{286:function(j,l,f){"use strict";f.d(l,"b",function(){return k}),f.d(l,"c",function(){return O}),f.d(l,"a",function(){return v});var u=f(151),w=new Error("timeout while waiting for mutex to become available"),v=new Error("mutex already locked"),m=new Error("request for lock canceled"),_=function(){function t(e,r){if(r===void 0&&(r=m),this._maxConcurrency=e,this._cancelError=r,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return t.prototype.acquire=function(){var e=this,r=this.isLocked(),i=new Promise(function(s,n){return e._queue.push({resolve:s,reject:n})});return r||this._dispatch(),i},t.prototype.runExclusive=function(e){return Object(u.__awaiter)(this,void 0,void 0,function(){var r,i,s;return Object(u.__generator)(this,function(n){switch(n.label){case 0:return[4,this.acquire()];case 1:r=n.sent(),i=r[0],s=r[1],n.label=2;case 2:return n.trys.push([2,,4,5]),[4,e(i)];case 3:return[2,n.sent()];case 4:return s(),[7];case 5:return[2]}})})},t.prototype.waitForUnlock=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){var e,r=this;return Object(u.__generator)(this,function(i){return this.isLocked()?(e=new Promise(function(s){return r._waiters.push({resolve:s})}),[2,e]):[2,Promise.resolve()]})})},t.prototype.isLocked=function(){return this._value<=0},t.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=void 0,e()}},t.prototype.cancel=function(){var e=this;this._queue.forEach(function(r){return r.reject(e._cancelError)}),this._queue=[]},t.prototype._dispatch=function(){var e=this,r=this._queue.shift();if(r){var i=!1;this._currentReleaser=function(){i||(i=!0,e._value++,e._resolveWaiters(),e._dispatch())},r.resolve([this._value--,this._currentReleaser])}},t.prototype._resolveWaiters=function(){this._waiters.forEach(function(e){return e.resolve()}),this._waiters=[]},t}(),y=_,b=function(){function t(e){this._semaphore=new y(1,e)}return t.prototype.acquire=function(){return Object(u.__awaiter)(this,void 0,void 0,function(){var e,r;return Object(u.__generator)(this,function(i){switch(i.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=i.sent(),r=e[1],[2,r]}})})},t.prototype.runExclusive=function(e){return this._semaphore.runExclusive(function(){return e()})},t.prototype.isLocked=function(){return this._semaphore.isLocked()},t.prototype.waitForUnlock=function(){return this._semaphore.waitForUnlock()},t.prototype.release=function(){this._semaphore.release()},t.prototype.cancel=function(){return this._semaphore.cancel()},t}(),k=b;function E(t,e,r){var i=this;return r===void 0&&(r=w),{acquire:function(){return new Promise(function(s,n){return Object(u.__awaiter)(i,void 0,void 0,function(){var o,a,c,p,d;return Object(u.__generator)(this,function(h){switch(h.label){case 0:o=!1,a=setTimeout(function(){o=!0,n(r)},e),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,t.acquire()];case 2:return c=h.sent(),o?(p=Array.isArray(c)?c[1]:c,p()):(clearTimeout(a),s(c)),[3,4];case 3:return d=h.sent(),o||(clearTimeout(a),n(d)),[3,4];case 4:return[2]}})})})},runExclusive:function(s){return Object(u.__awaiter)(this,void 0,void 0,function(){var n,o;return Object(u.__generator)(this,function(a){switch(a.label){case 0:n=function(){},a.label=1;case 1:return a.trys.push([1,,7,8]),[4,this.acquire()];case 2:return o=a.sent(),Array.isArray(o)?(n=o[1],[4,s(o[0])]):[3,4];case 3:return[2,a.sent()];case 4:return n=o,[4,s()];case 5:return[2,a.sent()];case 6:return[3,8];case 7:return n(),[7];case 8:return[2]}})})},release:function(){t.release()},cancel:function(){return t.cancel()},waitForUnlock:function(){return t.waitForUnlock()},isLocked:function(){return t.isLocked()}}}function O(t,e){return e===void 0&&(e=v),E(t,0,e)}}}]);
